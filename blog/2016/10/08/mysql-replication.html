<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>mysql replication-主从复制 · web1992&#x27;s blog</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="`mysql replication` mysql 的主从复制,本文使用`binary log`方式进行数据的复制."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="mysql replication-主从复制 · web1992&#x27;s blog"/><meta property="og:type" content="website"/><meta property="og:url" content="https://your-docusaurus-test-site.com/blog/2016/10/08/mysql-replication.html"/><meta property="og:description" content="`mysql replication` mysql 的主从复制,本文使用`binary log`方式进行数据的复制."/><meta property="og:image" content="https://your-docusaurus-test-site.com/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://your-docusaurus-test-site.com/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs2015.min.css"/><link rel="alternate" type="application/atom+xml" href="https://your-docusaurus-test-site.com/blog/atom.xml" title="web1992&#x27;s blog Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://your-docusaurus-test-site.com/blog/feed.xml" title="web1992&#x27;s blog Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/docusaurus.svg" alt="web1992&#x27;s blog"/><h2 class="headerTitleWithLogo">web1992&#x27;s blog</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="/about.html" target="_self">About</a></li><li class=""><a href="https://github.com/web1992" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recent posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent posts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/blog/2018/09/11/thread-pool-executor.html">ThreadPoolExecutor 使用</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/07/16/java-collection-map.html">Map collections in java</a></li><li class="navListItem"><a class="navItem" href="/blog/2017/11/23/checked-vs-unchecked-exceptions-in-java.html">Checked vs Unchecked Exceptions in Java</a></li><li class="navListItem"><a class="navItem" href="/blog/2017/11/09/jvm-file-encoding.html">jvm 中文乱码的问题</a></li><li class="navListItem"><a class="navItem" href="/blog/2017/03/22/code-review.html">工程checkList</a></li><li class="navListItem"><a class="navItem" href="/blog/2017/02/16/my-2016.html">我的2016</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/12/29/java-SimpleDateFormat.html">java SimpleDateFormat 线程不安全分析</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/12/20/java-key-condition.html">java Condition</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/12/16/java-jstack-dump.html">java jstack dump log 分析</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/12/14/java7-try-resource.html">java7-try-resource</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/11/29/java-jdk.html">java jdk</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/11/03/idea-live-template.html">idea code 模板</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/blog/2016/10/08/mysql-replication.html">mysql replication-主从复制</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/09/27/spring-init.html">spring mvc  DispatcherServlet ContextLoaderListener</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/09/20/linux-curl.html">linux curl 命令</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/09/01/nginx-ssl.html">blog 开启https </a></li><li class="navListItem"><a class="navItem" href="/blog/2016/08/29/java-design-patterns.html">java 设计模式总结</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/08/18/java-8.html">java 8 总结</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/07/26/tomcat-server-xml-conf.html">tomcat 配置</a></li><li class="navListItem"><a class="navItem" href="/blog/2016/05/28/linux-screen.html">linux screen</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2016/10/08/mysql-replication.html">mysql replication-主从复制</a></h1><p class="post-meta">October 8, 2016</p><div class="authorBlock"></div></header><div><span><p><code>mysql replication</code> mysql 的主从复制,本文使用<code>binary log</code>方式进行数据的复制.</p>
<p>本文着重<code>mysql</code>主从（<code>master/slave</code>）的配置</p>
<!--truncate-->
<hr>
<ul>
<li>1.<a href="#v1">主从复制的方法</a></li>
<li>2.<a href="#v2">主从复制的同步/异步方式</a></li>
<li>3.<a href="#v3">主从复制的配置</a></li>
<li>4.<a href="#v4">mysqldump 备份数据</a></li>
<li>5.<a href="#v5">配置 slave</a></li>
<li>6.<a href="#v6">master 没有数据的配置</a></li>
<li>7.<a href="#v7">master 已有有数据的配置</a></li>
<li>8.<a href="#v8">slave 链接到 master</a></li>
<li>9.<a href="#v9">mater,slave 常用的命令</a></li>
<li>10.<a href="#v10">binary log 的格式</a></li>
<li>11.<a href="#v11">主从的作用</a></li>
<li>12.<a href="#v12">参考的文档</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="1主从复制的方法-a-name-v1-a"></a><a href="#1主从复制的方法-a-name-v1-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.主从复制的方法<a name="v1"></a></h2>
<blockquote>
<p>binary log(旧方式) 或者 global transaction identifiers (GTIDs)(新方式)</p>
</blockquote>
<ul>
<li><p>binary log 需要打开 binlog</p></li>
<li><p>而 GTIDs 不需要打开 binglog</p>
<p>2.主从复制的同步/异步方式<a name="v2"></a></p></li>
</ul>
<hr>
<ul>
<li><p>asynchronous // 异步</p></li>
<li><p>semi synchronous // 半同步</p>
<p>3.主从复制的配置<a name="v3"></a></p></li>
</ul>
<hr>
<p>整体的步骤：master 配置-&gt; slave 配置-&gt; slave 链接到 master -&gt; 开始复制数据</p>
<p>摘抄来自 mysql 官方文档:</p>
<ul>
<li><p>1 Setting the Replication Master Configuration // 配置 master</p></li>
<li><p>2 Creating a User for Replication // 创建提供复制数据的用户</p></li>
<li><p>3 Obtaining the Replication Master Binary Log Coordinates // 获取 master binary log 文件的位置和 Position</p></li>
<li><p>4 Choosing a Method for Data Snapshots // 复制已经有的数据方式，mysqldump 或者 row data copy</p></li>
<li><p>5 Setting Up Replication Slaves // 配置 Slaves,链接到 mster</p></li>
<li><p>6 Adding Slaves to a Replication Environment // 新增新的 slave 到 master</p>
<p>1).<code>master</code> 配置</p></li>
</ul>
<p>开启 binary log ,设置<code>server-id</code>，<code>server-id</code>是唯一的，maset,slave 都不可以重复(需要重启生效)</p>
<pre><code class="hljs css language-sh">    [mysqld]
    server-id=1
    <span class="hljs-built_in">log</span>-bin=mysql-bin
</code></pre>
<p>2).在<code>master</code>配置新的 mysql 账户，确保有 <code>REPLICATION SLAVE</code> 的权限,(slave 使用此账户，复制数据)</p>
<pre><code class="hljs">CREATE USER 'repl'@'%.mydomain.com' IDENTIFIED BY 'slavepass';
GRANT REPLICATION SLAVE ON *.* TO 'repl'@'%.mydomain.com';
</code></pre>
<p>3).获取 master binary log 文件的位置和 Position</p>
<pre><code class="hljs css language-sh">    mysql&gt; SHOW MASTER STATUS;
    +------------------+----------+--------------+------------------+-------------------+
    | File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
    +------------------+----------+--------------+------------------+-------------------+
    | mysql-bin.000004 |  9781044 |              |                  |                   |
    +------------------+----------+--------------+------------------+-------------------+
</code></pre>
<pre><code class="hljs">File mysql-bin.000004 Position 9781044  需要在slave链接到master时使用
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="4使用-mysqldump-备份复制-master-原有的数据-生成-dump-文件如果-master-没有数据-省略此步骤-a-name-v4-a"></a><a href="#4使用-mysqldump-备份复制-master-原有的数据-生成-dump-文件如果-master-没有数据-省略此步骤-a-name-v4-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4.使用<code>mysqldump</code> 备份复制 master 原有的数据，生成 dump 文件(如果 master 没有数据，省略此步骤)<a name="v4"></a></h2>
<pre><code class="hljs">mysqldump -uroot -p -databases demo_db &gt; demo_db.db
#demo_db 是需要备份的数据库,demo_db.db 是备份之后的文件
</code></pre>
<blockquote>
<p>mysql 备份数据用两种方式：使用 mysqldump 或者使用 <code>Raw Data Files</code></p>
</blockquote>
<p>建议使用 mysqldump。</p>
<h2><a class="anchor" aria-hidden="true" id="5-slave-配置-配置-server-id-唯一的-id-最好也开启-binary-log-提供数据备份-a-name-v5-a"></a><a href="#5-slave-配置-配置-server-id-唯一的-id-最好也开启-binary-log-提供数据备份-a-name-v5-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5.<code>slave</code> 配置,配置 server-id，唯一的 id,最好也开启 binary log,提供数据备份<a name="v5"></a></h2>
<pre><code class="hljs css language-sh">    [mysqld]
    server-id=2
    <span class="hljs-built_in">log</span>-bin=mysql-bin
    skip-slave-start
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="6slave-开始复制数据-如果-master-没有数据-执行-8步骤-即可开始复制数据-a-name-v6-a"></a><a href="#6slave-开始复制数据-如果-master-没有数据-执行-8步骤-即可开始复制数据-a-name-v6-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6.slave 开始复制数据，如果 master 没有数据，执行<code>8步骤</code>即可开始复制数据<a name="v6"></a></h2>
<h2><a class="anchor" aria-hidden="true" id="7slave-开始复制数据-如果-master-已经有数据了-a-name-v7-a"></a><a href="#7slave-开始复制数据-如果-master-已经有数据了-a-name-v7-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7.slave 开始复制数据，如果 master 已经有数据了<a name="v7"></a></h2>
<ul>
<li>a).使用 --skip-slave-start 启动 slave，</li>
<li>b).导入 dump 文件 <code>mysql &lt; fulldb.dump</code></li>
<li>c).执行<code>第8步</code></li>
<li>d).执行 <code>START SLAVE;</code> 开始主从复制</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="8-slave-链接到-master-数据库-a-name-v8-a"></a><a href="#8-slave-链接到-master-数据库-a-name-v8-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>8.<code>slave</code>链接到<code>master</code>数据库<a name="v8"></a></h2>
<pre><code class="hljs css language-sh">    mysql&gt; CHANGE MASTER TO
        -&gt;     MASTER_HOST=<span class="hljs-string">'master_host_name'</span>,
        -&gt;     MASTER_USER=<span class="hljs-string">'replication_user_name'</span>,
        -&gt;     MASTER_PASSWORD=<span class="hljs-string">'replication_password'</span>,
        -&gt;     MASTER_LOG_FILE=<span class="hljs-string">'recorded_log_file_name'</span>,
        -&gt;     MASTER_LOG_POS=recorded_log_position;
</code></pre>
<p>至此，mysql 可以开始复制数据了。</p>
<h2><a class="anchor" aria-hidden="true" id="9mater-slave-常用的命令-a-name-v9-a"></a><a href="#9mater-slave-常用的命令-a-name-v9-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>9.mater,slave 常用的命令<a name="v9"></a></h2>
<blockquote>
<p>日志文件,在<code>/etc/my.cnf</code>中,如果配置不成功，可以查看此日志</p>
</blockquote>
<pre><code class="hljs">log-error=/var/log/mysqld.log
</code></pre>
<blockquote>
<p>show slave status\G; 查询 slave 的状态，在 salve 中执行才有数据</p>
</blockquote>
<pre><code class="hljs css language-sh">    mysql&gt; show slave status\G;
    *************************** 1. row ***************************
       Slave_IO_State: Waiting <span class="hljs-keyword">for</span> master to send event
      Master_Host: 101.200.235.63
      Master_User: repl
      Master_Port: 3306
    Connect_Retry: 60
      Master_Log_File: mysql-bin.000005
      Read_Master_Log_Pos: 235476
       Relay_Log_File: iZ25sbgbgmwZ-relay-bin.000003
    Relay_Log_Pos: 539
    Relay_Master_Log_File: mysql-bin.000005
     Slave_IO_Running: Yes
    Slave_SQL_Running: Yes
      Replicate_Do_DB:
      Replicate_Ignore_DB:
       Replicate_Do_Table:
       Replicate_Ignore_Table:
      Replicate_Wild_Do_Table:
      Replicate_Wild_Ignore_Table:
       Last_Errno: 0
       Last_Error:
     Skip_Counter: 0
      Exec_Master_Log_Pos: 235476
      Relay_Log_Space: 1360
      Until_Condition: None
       Until_Log_File:
    Until_Log_Pos: 0
       Master_SSL_Allowed: No
       Master_SSL_CA_File:
       Master_SSL_CA_Path:
      Master_SSL_Cert:
    Master_SSL_Cipher:
       Master_SSL_Key:
    Seconds_Behind_Master: 0
    Master_SSL_Verify_Server_Cert: No
    Last_IO_Errno: 0
    Last_IO_Error:
       Last_SQL_Errno: 0
       Last_SQL_Error:
      Replicate_Ignore_Server_Ids:
     Master_Server_Id: 1
      Master_UUID: 2054563f-6f44-11e5-a312-00163e001e61
     Master_Info_File: /var/lib/mysql/master.info
    SQL_Delay: 0
      SQL_Remaining_Delay: NULL
      Slave_SQL_Running_State: Slave has <span class="hljs-built_in">read</span> all relay <span class="hljs-built_in">log</span>; waiting <span class="hljs-keyword">for</span> more updates
       Master_Retry_Count: 86400
      Master_Bind:
      Last_IO_Error_Timestamp:
     Last_SQL_Error_Timestamp:
       Master_SSL_Crl:
       Master_SSL_Crlpath:
       Retrieved_Gtid_Set:
    Executed_Gtid_Set:
    Auto_Position: 0
     Replicate_Rewrite_DB:
     Channel_Name:
       Master_TLS_Version:
    1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)
</code></pre>
<p><code>Slave_IO_State: Waiting for master to send event</code> 可以查询到从库 slave 的状态</p>
<blockquote>
<p>stop slave; // 关闭主从同步</p>
</blockquote>
<blockquote>
<p>start slave;　// 开启主从同步</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="10binary-log-的格式-a-name-v10-a"></a><a href="#10binary-log-的格式-a-name-v10-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>10.binary log 的格式<a name="v10"></a></h2>
<ul>
<li>SBR Statement Based Replication</li>
<li>RBR Row Based Replication</li>
<li>MBR Mixed Based Replication</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="11主从的作用-a-name-v11-a"></a><a href="#11主从的作用-a-name-v11-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>11.主从的作用<a name="v11"></a></h2>
<ul>
<li>performance // 提高性能(读写分离)</li>
<li>backup of // 数据备份(防止数据丢失)</li>
</ul>
<hr>
<h2><a class="anchor" aria-hidden="true" id="12参考的文档-a-name-v12-a"></a><a href="#12参考的文档-a-name-v12-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>12.参考的文档：<a name="v12"></a></h2>
<p><a href="http://dev.mysql.com/doc/refman/5.7/en/replication.html">mysql replication(官网文档)</a></p>
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/blog">Recent posts</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#1主从复制的方法-a-name-v1-a">1.主从复制的方法&lt;a name=&quot;v1&quot;&gt;&lt;/a&gt;</a></li><li><a href="#4使用-mysqldump-备份复制-master-原有的数据-生成-dump-文件如果-master-没有数据-省略此步骤-a-name-v4-a">4.使用<code>mysqldump</code> 备份复制 master 原有的数据，生成 dump 文件(如果 master 没有数据，省略此步骤)&lt;a name=&quot;v4&quot;&gt;&lt;/a&gt;</a></li><li><a href="#5-slave-配置-配置-server-id-唯一的-id-最好也开启-binary-log-提供数据备份-a-name-v5-a">5.<code>slave</code> 配置,配置 server-id，唯一的 id,最好也开启 binary log,提供数据备份&lt;a name=&quot;v5&quot;&gt;&lt;/a&gt;</a></li><li><a href="#6slave-开始复制数据-如果-master-没有数据-执行-8步骤-即可开始复制数据-a-name-v6-a">6.slave 开始复制数据，如果 master 没有数据，执行<code>8步骤</code>即可开始复制数据&lt;a name=&quot;v6&quot;&gt;&lt;/a&gt;</a></li><li><a href="#7slave-开始复制数据-如果-master-已经有数据了-a-name-v7-a">7.slave 开始复制数据，如果 master 已经有数据了&lt;a name=&quot;v7&quot;&gt;&lt;/a&gt;</a></li><li><a href="#8-slave-链接到-master-数据库-a-name-v8-a">8.<code>slave</code>链接到<code>master</code>数据库&lt;a name=&quot;v8&quot;&gt;&lt;/a&gt;</a></li><li><a href="#9mater-slave-常用的命令-a-name-v9-a">9.mater,slave 常用的命令&lt;a name=&quot;v9&quot;&gt;&lt;/a&gt;</a></li><li><a href="#10binary-log-的格式-a-name-v10-a">10.binary log 的格式&lt;a name=&quot;v10&quot;&gt;&lt;/a&gt;</a></li><li><a href="#11主从的作用-a-name-v11-a">11.主从的作用&lt;a name=&quot;v11&quot;&gt;&lt;/a&gt;</a></li><li><a href="#12参考的文档-a-name-v12-a">12.参考的文档：&lt;a name=&quot;v12&quot;&gt;&lt;/a&gt;</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/docusaurus.svg" alt="web1992&#x27;s blog" width="66" height="58"/></a><div><h5>Links</h5><a href="https://docusaurus.io/">docusaurus</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/web1992">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://docusaurus.io/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 京ICP备15055486号</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'a531c94473320aaf6ccf8924c4835d13',
                indexName: 'web1992',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>